<!DOCTYPE html>
<html>
	<head>
		<title>Annuaire M1IF13</title>
	</head>

	<body>
		<a href="serveur.html" >Côté Serveur</a>
		<h1>Un simple annuaire de sites Web - Côte Client</h1>

		<div>
			Nom : <input type="text" id="key" autofocus/>
			URL : <input type="text" id="value"/>
			<a href="#" id="addPair">Ajouter à l'annuaire</a>
		</div>
		
		<div id="pairs"></div>

		<script src="http://code.jquery.com/jquery-1.12.4.min.js"></script>
		<script src="../annuaire.js"></script>
		<script>
            $(function() {
                var annuaire  = new Annuaire();

                var showPairs = function() {
                    $('#pairs').html('');
                    $.each(annuaire.collection,
                        function(key, value) {
                            var pairHtml = '<div>' + key + ' : ' + value + ' <a href="#" key="' + key + '" class="pairRemover">(remove)</a></div>';
                            $('#pairs').append(pairHtml);
                            $(".pairRemover").click(removePair);
                        }
                    );
                };

                var removePair = function(event) {
                    var key = event.target.attributes.getNamedItem("key").value;
                    annuaire.remove(key);
                    showPairs();
                };

                $("#addPair").click(function() {
                    var key = $("#key").val(),
                        value = $("#value").val();
                    annuaire.bind(key, value);
                    showPairs();
                });

            });
		</script>
	</body>

</html>