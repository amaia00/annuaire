<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Annuaire M1IF13</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
</head>

<body>
<div class="container">


    <h2>Un simple annuaire de sites Web</h2>
    <hr>
    <section id="routage">
        <ul class="nav nav-tabs">
            <li class="nav active"> <a id="server-view" href="#/server" data-target="#server">Côte Serveur </a> </li>
            <li class="nav"> <a id="client-view" href="#/client" data-target="#server">Côte Client </a> </li>
        </ul>
    </section>


    <div class="error-section"></div>

    <section class="content-server">
    <div class="row">
        <div class="col-md-12">
            <h4>Côte Serveur</h4>
            Nom : <input type="text" id="key-serveur" autofocus/>
            URL : <input type="text" id="value-serveur"/>
            <button type="button" id="addPair-serveur" class="btn btn-success btn-sm">
                <icon class="glyphicon glyphicon-ok"></icon>
            </button>
        </div>

        <div class="col-md-12">
            <table id="pairs-serveur" class="table table-bordered">
                <thead>
                <tr>
                    <td>Nom</td>
                    <td>URL</td>
                    <td></td>
                </tr>
                </thead>
                <tbody id="table-body-server">
                <script type="text/template" id="server-template">
                    <td><%= site %></td>
                    <td><%= url %></td>
                    <td></td>
                </script>
                </tbody>
            </table>
        </div>
    </div>
    </section>

    <section class="content-client" style="display: none;">
    <div class="row">
        <div class="col-md-12">
            <h4>Côte Client</h4>
            Nom : <input type="text" id="key-client" autofocus/>
            URL : <input type="text" id="value-client"/>
            <button type="button" id="addPair" class="btn btn-primary btn-sm add-site">
                <icon class="glyphicon glyphicon-ok"></icon>
            </button>
        </div>

        <div class="col-md-12">
            <table id="pairs-client" class="table table-bordered">
                <thead>
                <tr>
                    <td>Nom</td>
                    <td>URL</td>
                    <td></td>
                </tr>
                </thead>
                <tbody id="table-body-client">
                <script type="text/template" id="client-template">
                    <td><%= site %></td>
                    <td><%= url %></td>
                    <td></td>
                </script>
                </tbody>
            </table>
        </div>
    </div>


</div>


<!-- TODO: Install bootstrap avec npm -->
<script src="http://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="http://underscorejs.org/underscore-min.js"></script>
<script src="http://backbonejs.org/backbone-min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
<script src="../annuaire.js"></script>
<script src="client.js"></script>
<script src="serveur.js"></script>
<script src="script.js"></script>
<script src="view/views.js"></script>
<script>
    var app = app || {};

    (function () {
        'use strict';

        var AppRouter = Backbone.Router.extend({
            routes: {
                '' : 'server',
                'server' : 'server', //par défaut le côté serveur
                'client' : 'client'
            },

            server: function () {
                this.loadView(new app.ServerView());
            },

            client: function () {
                this.loadView(new app.ClientView());
            },

            loadView : function(view) {
                this.view && this.view.hide();
                this.view = view;
            }
        });

        var appRouter = new AppRouter();

        /**
         * On active l'option pour la gestion de l'historial du navigateur
         */
        Backbone.history.start();
    })();
</script>
</body>

</html>